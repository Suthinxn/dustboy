{% extends "/base/default_page.html" %}

{% block title %} DustBoy {% endblock title %}

{% block content %}
<div class="flex flex-col m-6">
  <div class="mb-4">
    <h1 class="text-2xl font-bold">Forecast pm2.5</h1>
      <div class="border border-white shadow-2xl rounded-lg">
        <div class="m-2">
          <select class="select w-full">
            <option disabled selected>Pick a color</option>
            <option>Crimson</option>
            <option>Amber</option>
            <option>Velvet</option>
          </select>
        </div>

        <div>
          <div id="map"></div>

          <!-- Leaflet CSS -->
          <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
          <!-- Leaflet JS -->
          <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
          <!-- Heatmap Plugin -->
          <script src="https://unpkg.com/leaflet.heat/dist/leaflet-heat.js"></script>

          <script>
            var map = L.map('map').setView([13.7563, 100.5018], 6);

            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
              attribution: '© OpenStreetMap contributors'
            }).addTo(map);

            fetch("/data")
              .then(res => res.json())
              .then(data => {
                var heat = L.heatLayer(data, {
                  radius: 40,
                  blur: 20,
                  maxZoom: 10,
                  max: 100
                }).addTo(map);
              });
          </script>
        </div>
      </div>
  </div>

  <div>
    <div class="overflow-x-auto rounded-lg shadow">
        <table class="table w-full">
          <thead>
            <tr class="bg-gray-100 border-b border-gray-300">
              <th class="w-1/5 text-left px-4 py-3">จังหวัด</th>
              <th class="w-1/5 text-center px-4 py-3">ชั่วโมงล่าสุด</th>
              <th class="w-1/5 text-center px-4 py-3">คาดการรายชั่วโมงถัดไป</th>
              <th class="w-1/5 text-center px-4 py-3">เฉลี่ย 24 ชั่วโมง (µg/m³)</th>
              <th class="w-1/5 text-center px-4 py-3">ข้อมูลกราฟ</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="px-4 py-3 text-left">สงขลา</td>
              <td class="px-4 py-3 text-center">32.1</td> 
              <td class="px-4 py-3 text-center">32.1</td>
              <td class="px-4 py-3 text-center">32.1</td>
              <td class="px-4 py-3 text-center">32.1</td>
            </tr>
          </tbody>
        </table>
      </div>
  </div>


</div>
{% endblock content %}